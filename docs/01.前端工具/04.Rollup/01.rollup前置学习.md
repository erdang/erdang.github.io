---
title: rollup前置学习基础
date: 2022-05-11 00:19:40
permalink: /pages/631196/
---

## fs 模块的使用

### 判断文件夹是否存在

通过异步和同步两种方式判断dist目录是否存在

    const fs = require('fs');

    fs.exists('./dist',(result)=>{console.log(result)})

    const exists = fs.existsSync('./dist');

    if(exists){
        console.log('dist目录存在')
    }else{
        console.log('dist目录不存在')
    }

同步的任务先完成，而异步的任务会延后一些，但是同步任务会导致主线程阻塞，在实际应用过程中需要根据实际应用场景进行取舍

### 创建文件夹

通过异步的方式创建dist目录：

    fs.exists('./dist',(result)=>{
        !result && fs.mkdir('./dist')
    })

通过同步的方式创建dist目录：

    if(!fs.existsSync('./dist')){
        fs.mkdirSync('./dist')
    }

### 读取文件

通过异步的方式

    const fs = require('fs')

    fs.readFile('./a.js',(err,file)=>{
        if (!err) console.log(file.toString()) // 打印文件内容,通过toString()方法可以获取到文件的文本内容： 
    })

通过同步方式

    const file = fs.readFileSync('./a.js');

    console.log(file.toString()) 

### 写入文件

#### 覆盖写入

通过异步的方式

    const fs = require('fs')

    fs.readFile('./a.js',(err,file)=>{
        if (!err)fs.writeFile('./dist/a.js',file,()=>{
            console.log('写入成功') // 写入成功的回调,默认会覆盖
        }) 
    })

通过同步方式

    const file = fs.readFileSync('./a.js');
    fs.writeFileSync('./dist/index.js', file) // 同步写入文件

#### 追加写入

很多时候我们需要在文件末尾追加写入一些内容，可以增加flag属性进行标识，当flag的值为a时，表示追加写入：

    const file = fs.readFileSync('./a.js');
    fs.writeFileSync('./dist/index.js', file,{flag:'a'}) // 同步写入文件

## path的基本应用

### 生成绝对路径

    const path = require('path')

    console.log(path.resolve('./dist/index.js'))
    console.log(path.resolve('src', 'vue/path/index.js'))
    console.log(path.resolve('/src', '/vue/path/index.js'))
    console.log(path.resolve('/src', 'vue/path/index.js'))

    /Users/sam/WebstormProjects/rollup-test/dist/index.js
    /Users/sam/WebstormProjects/rollup-test/src/vue/path/index.js
    /vue/path/index.js
    /src/vue/path/index.js
    从左往右依次拼装路径；
    如果参数为相对路径，则会将相对路径拼接起来，再加上当前目录的绝对路径合并成一个完整路径；
    如果参数为绝对路径，则会以最后一个参数的绝对路径为准；
    如果参数既有绝对路径也有相对路径，则会按照从左向后的顺序进行拼接。

### 生成相对路径 

path.relative(a, b)

## buble的基本应用

buble是一款类似babel的ES编译器，它的主要特性如下：

- 无配置，没有plugins和preset的概念，可扩展性较低，但简单易用。
- 相对较小，速度更快。
- 避免无法在ES2015中表达的代码，如for...of。buble不支持的功能列表：[buble.surge.sh](https://buble.surge.sh/guide/#unsupported-features)

## flow的基本应用

flow是Javascript静态代码类型检查器


## 总结

- fs模块：Node.js内置模块，用于本地文件系统处理；
- path模块：Node.js内置模块，用于本地路径解析；
- buble模块：用于ES6+语法编译；
- flow模块：用于Javascript源码静态检查；
- zlib模块：Node.js内置模块，用于使用gzip算法进行文件压缩；
- terser模块：用于Javascript代码压缩和美化。

[前置学习之基础知识篇](https://juejin.cn/post/6844903721051095048#heading-16)